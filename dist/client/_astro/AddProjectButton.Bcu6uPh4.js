import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.DxhH1ShK.js";import{a as f}from"./auth.C6MmFFld.js";import{a as U}from"./index.DhUkgbpq.js";import{B as N}from"./Button.BK-c6KtM.js";import{b as D}from"./index.kRI0wtIn.js";import{c as I}from"./utils.BnlJtBIq.js";import{I as x}from"./Input.BhPYPo8a.js";import{L as p}from"./Label.C_pE6Uy6.js";import{P as C}from"./PageLikePanel.Dipvl2FS.js";import{C as F}from"./Link.BGo-y1Vn.js";import"./virtual.VUcB3V37.js";import"./client.B9YBqyHK.js";import"./ripple.8VKTSqqU.js";import"./slot.RkfkL2mj.js";import"./proxy.D4YeN7SK.js";import"./ElectricBorder.DAWLx7iV.js";import"./Panel.BFyw-rTz.js";import"./accordion.Dr61eiHV.js";import"./accordion.CpVAuD1l.js";import"./useControlledState.CmDsCfE3.js";import"./index.DpQ8kv17.js";import"./index.C2SuE_cr.js";import"./index.CqUFkXl9.js";import"./index.Du2_2VfY.js";import"./index.CG_O7YBG.js";import"./createLucideIcon.C1tpinp8.js";import"./icon.Df9DBUhx.js";import"./PanelAction.a_cGOObt.js";const G=({isOpen:n,onClose:t,className:u})=>{const[g,l]=s.useState(!1),[i,o]=s.useState(!1),[a,c]=s.useState(!1),h=s.useRef(null),[d,b]=s.useState(""),[m,j]=s.useState(""),[y,k]=s.useState(""),[v,w]=s.useState("");s.useEffect(()=>(n&&h.current?(document.body.style.overflow="hidden",h.current.scrollIntoView({behavior:"smooth",block:"center"})):document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]);const P=async()=>{try{l(!0);const r=await f.signIn.social({provider:"github",callbackURL:window.location.href});if(console.log("GitHub sign-in result:",r),r.error){console.error("Sign-in error:",r.error),alert(`Failed to sign in: ${r.error.message||"Please try again."}`),l(!1);return}if(r.data&&"url"in r.data&&r.data.url){t?.(),window.location.href=r.data.url;return}if(r.data&&"user"in r.data){t?.(),l(!1);return}console.error("Unexpected sign-in response:",r),alert("Unexpected response from sign-in. Please try again."),l(!1)}catch(r){console.error("Sign-in error:",r),alert(`An error occurred during sign-in: ${r instanceof Error?r.message:"Please try again."}`),l(!1)}},E=async()=>{if(!d||!m){alert("Please enter both email and password");return}try{o(!0);const r=await f.signIn.email({email:d,password:m});r.error?(console.error("Email sign-in error:",r.error),alert(r.error.message||"Failed to sign in. Please check your credentials.")):(b(""),j(""),k(""),w(""),c(!1),t?.())}catch(r){console.error("Email sign-in error:",r),alert("An error occurred during sign-in. Please try again.")}finally{o(!1)}},A=async()=>{if(!d||!m){alert("Please enter both email and password");return}try{o(!0);const r={email:d,password:m};v.trim()&&(r.name=v.trim()),y.trim()&&(r.username=y.trim());const S=await f.signUp.email(r);S.error?(console.error("Email sign-up error:",S.error),alert(S.error.message||"Failed to sign up. Please try again.")):(b(""),j(""),k(""),w(""),c(!1),t?.())}catch(r){console.error("Email sign-up error:",r),alert("An error occurred during sign-up. Please try again.")}finally{o(!1)}};return n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black/50 backdrop-blur-sm z-[100]",onClick:t}),e.jsx("div",{ref:h,className:"fixed inset-0 z-[101] flex items-center justify-center p-4 overflow-y-auto",children:e.jsx("div",{className:"w-full max-w-md my-auto",children:e.jsx(C,{title:a?"Sign Up":"Sign In",titleCenter:!0,className:u,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2 border-b border-slate-200 dark:border-slate-700 pb-2",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:I("flex-1 py-1 text-sm font-medium transition-colors",a?"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300":"text-slate-900 dark:text-slate-100 border-b-2 border-slate-900 dark:border-slate-100"),children:"Sign In"}),e.jsx("button",{type:"button",onClick:()=>c(!0),className:I("flex-1 py-1 text-sm font-medium transition-colors",a?"text-slate-900 dark:text-slate-100 border-b-2 border-slate-900 dark:border-slate-100":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"),children:"Sign Up"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(p,{children:"Email"}),e.jsx(x,{id:"email",type:"email",value:d,onChange:r=>b(r.target.value),placeholder:"your@email.com",disabled:i,className:"w-full mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Password"}),e.jsx(x,{id:"password",type:"password",value:m,onChange:r=>j(r.target.value),placeholder:"••••••••",disabled:i,className:"w-full mt-1"})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(p,{children:"Username (e.g: siteuser777, vitalik)"}),e.jsx(x,{id:"nickname",type:"text",value:y,onChange:r=>k(r.target.value),placeholder:"username",disabled:i,className:"w-full mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Display Name (e.g: John Doe, Satoshi Nakamoto)"}),e.jsx(x,{id:"displayName",type:"text",value:v,onChange:r=>w(r.target.value),placeholder:"Your Name",disabled:i,className:"w-full mt-1"})]})]}),e.jsx(N,{variant:"primary",size:"sm",disabled:i,onClick:()=>{a?A():E()},className:"w-full",children:i?a?"Signing up...":"Signing in...":a?"Sign Up":"Sign In"})]}),e.jsxs("div",{className:"flex items-center gap-2 py-2",children:[e.jsx("hr",{className:"flex-1 border-slate-200 dark:border-slate-700"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"OR"}),e.jsx("hr",{className:"flex-1 border-slate-200 dark:border-slate-700"})]}),e.jsxs(N,{variant:"secondary",size:"sm",onClick:P,disabled:g,className:"w-full flex items-center justify-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),g?"Signing in...":"Login with GitHub"]})]})})})})]}):null},z=({isOpen:n,onClose:t})=>n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black/50 backdrop-blur-sm z-[100]",onClick:t}),e.jsx("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[101] flex items-center justify-center w-full max-w-2xl px-4",children:e.jsx(C,{title:"Add your project",titleCenter:!0,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-6 text-lg text-center",children:["Go to"," ",e.jsx(F,{uri:"/all-stars",className:"font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:"All Stars"})," ","universe page and click on create galaxy."]}),e.jsx("div",{className:"flex gap-3 justify-end",children:e.jsx(N,{variant:"primary",onClick:t,size:"md",children:"Got it"})})]})})})]}):null,me=({className:n})=>{const{data:t,isPending:u}=f.useSession(),[g,l]=s.useState(!1),[i,o]=s.useState(!1),a=()=>{u||(t?.user?o(!0):l(!0))},c=!!t?.user;return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:a,disabled:u,className:I("px-8 py-4 bg-blue-600 dark:bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors text-lg flex items-center justify-center gap-2",n),children:[c&&e.jsx(U,{className:"w-5 h-5 text-white"}),"Add your project"]}),e.jsx(G,{isOpen:g,onClose:()=>l(!1)}),e.jsx(z,{isOpen:i,onClose:()=>o(!1)})]})};export{me as default};
