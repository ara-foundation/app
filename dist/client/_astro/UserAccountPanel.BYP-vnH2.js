import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.DxhH1ShK.js";import{B as F}from"./Panel.BFyw-rTz.js";import"./ripple.8VKTSqqU.js";import"./accordion.CpVAuD1l.js";import{B as N}from"./Button.BK-c6KtM.js";import{C as L}from"./Link.BGo-y1Vn.js";import{I as u}from"./Input.BhPYPo8a.js";import{L as c}from"./Label.C_pE6Uy6.js";import{F as P,a as B,b as T}from"./index.kRI0wtIn.js";import{u as D}from"./useIsCurrentUser.C-ex-YMJ.js";import{a as G}from"./virtual.VUcB3V37.js";import{a as H}from"./auth.C6MmFFld.js";import{A as U}from"./index.CG_O7YBG.js";import{m as R}from"./proxy.D4YeN7SK.js";import"./utils.BnlJtBIq.js";import"./slot.RkfkL2mj.js";import"./useControlledState.CmDsCfE3.js";import"./index.DpQ8kv17.js";import"./index.C2SuE_cr.js";import"./index.CqUFkXl9.js";import"./index.Du2_2VfY.js";import"./ElectricBorder.DAWLx7iV.js";import"./client.B9YBqyHK.js";async function $(p){try{const s=await G.getAccountsByUserId({userId:p});return s.data?.success&&s.data.data?s.data.data:[]}catch(s){return console.error("Error getting accounts by user id:",s),[]}}const ue=({user:p,authUser:s})=>{const[o,w]=a.useState(!1),[l,k]=a.useState(!1),[x,h]=a.useState(!1),[A,I]=a.useState([]),[q,f]=a.useState(!1),[g,y]=a.useState(""),[v,j]=a.useState(""),d=s?.email,{isCurrentUser:r,isLoading:S}=D(d);a.useEffect(()=>{(async()=>{const n=await H.getSession();k(!!n?.data?.user)})()},[]),a.useEffect(()=>{s&&(y(s.name||""),j(s.username||s.displayUsername||""))},[s]),a.useEffect(()=>{(async()=>{if(r&&s?.id){f(!0);try{const n=await $(s.id);I(n.map(b=>({providerId:b.providerId,accountId:b.accountId})))}catch(n){console.error("Error fetching accounts:",n)}finally{f(!1)}}})()},[r,s?.id]);const m=[],i=A.find(t=>t.providerId==="github");i&&m.push({type:"github",url:`https://github.com/${i.accountId}`});const E=t=>{switch(t){case"github":return e.jsx(T,{className:"w-5 h-5 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors"});case"linkedin":return e.jsx(B,{className:"w-5 h-5 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors"});case"telegram":return e.jsx(P,{className:"w-5 h-5 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors"})}},C=async()=>{if(!(!l||!r)){h(!0);try{await new Promise(t=>setTimeout(t,1e3)),console.log("Saving account:",{displayName:g,username:v}),alert("Account settings saved successfully!")}catch(t){console.error("Error saving account:",t),alert("Failed to save account settings. Please try again.")}finally{h(!1)}}};return S||!l||!r?null:e.jsxs("div",{className:"w-full mt-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(N,{onClick:()=>w(!o),variant:"secondary",outline:!0,children:o?"Hide Form":"User Account"})}),e.jsx(U,{mode:"wait",children:o&&e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"w-full",children:e.jsx(F,{className:"w-full",children:e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Profile Information"}),l&&r&&e.jsx(N,{onClick:C,disabled:x,variant:"success",children:x?"Saving...":"Save Account"})]}),m.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Connected Social Links"}),e.jsx("div",{className:"flex items-center gap-4",children:m.map(t=>e.jsxs(L,{uri:t.url,asNewTab:!0,className:"flex items-center gap-2 p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800/50 transition-colors",children:[E(t.type),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:t.type==="github"&&i&&e.jsxs(e.Fragment,{children:["GitHub (",i.accountId,")"]})})]},t.type))})]}),d&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Email"}),e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 px-3 py-2 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Display Name"}),e.jsx(u,{type:"text",value:g,onChange:t=>y(t.target.value),className:"w-full",placeholder:"Enter display name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Username"}),e.jsx(u,{type:"text",value:v,onChange:t=>j(t.target.value),className:"w-full",placeholder:"Enter username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Password"}),e.jsx(u,{type:"password",value:"••••••••",disabled:!0,className:"w-full",onChange:()=>{},placeholder:"Enter password"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:"Password change is not available yet."})]})]})})},"form")})]})};export{ue as default};
