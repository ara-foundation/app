---
import Logo from "./Logo.astro";
import AuthNavItem from "./AuthNavItem";
import WalletBalance from "./WalletBalance";
import WorkNavbar, { type MenuName } from "../navbar/WorkNavbar.astro";
import { MenuItemProps } from "../menu/MenuItem";
import { motion } from "framer-motion";
import { socialLinks } from "@/scripts/data";
import SocialLink from "./SocialLink";
import Badge from "../badge/Badge";

interface Props {
  active?: string;
  hideLinks?: string[];
  hideAuth?: boolean;
  additional?: MenuItemProps[];
}

const { active, hideLinks, hideAuth, additional } = Astro.props;
---

<header
  class={`shadow-sm border-b border-purple-200/10 dark:border-purple-700/10 fixed top-0 right-0 left-0 z-900`}
>
  <div
    class="navbar bg-base-transparent dark:bg-transparent shadow-sm items-start min-h-6"
  >
    <div class="navbar-start h-6">
      <div class="dropdown">
        <div tabindex={0} role="button" class="btn btn-ghost lg:hidden">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h8m-8 6h16"></path>
          </svg>
        </div>
        <WorkNavbar
          tabIndex="-1"
          additional={additional}
          className="menu menu-sm dropdown-content bg-base-100 dark:bg-slate-800 rounded-box z-1 mt-3 w-52 p-2 shadow dark:shadow-slate-700"
          active={active ? (active as MenuName) : undefined}
          hideLinks={hideLinks ? (hideLinks as MenuName[]) : undefined}
          vertical={true}
        >
          <slot />
        </WorkNavbar>
      </div>
      <Logo />
      <Badge
        variant="purple"
        className="text-slate-500 dark:text-slate-400 text-sm">Demo</Badge
      >
      <motion.div className="flex flex-row items-center space-x-2 ml-4 w-full">
        {
          Object.values(socialLinks).map((link) => (
            <SocialLink className="flex rounded-sm w-8 h-8 mt-3" link={link} />
          ))
        }
      </motion.div>
    </div>
    <div class="navbar-center h-6 hidden lg:flex lg:min-w-[50vw]">
      <WorkNavbar
        className="space-x-6"
        active={active ? (active as MenuName) : undefined}
        hideLinks={hideLinks ? (hideLinks as MenuName[]) : undefined}
      >
        <slot />
      </WorkNavbar>
    </div>
    <div class="navbar-end flex h-6 items-center gap-3">
      {!hideAuth && <AuthNavItem className="py-2! px-2!" client:load />}
      {!hideAuth && <WalletBalance className="py-2! px-2!" client:load />}
    </div>
  </div>
</header>

<style is:global>
  .vertical-navbar ul {
    display: "flex";
  }
</style>
